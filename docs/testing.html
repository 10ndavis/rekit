
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Testing Â· Rekit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="webpack.html" />
    
    
    <link rel="prev" href="styling.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Read Me
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../README-2.0.md">
            
                <span>
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="get-started.html">
            
                <a href="get-started.html">
            
                    
                    Get started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="app.html">
            
                <a href="app.html">
            
                    
                    App Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="concepts.html">
            
                <a href="concepts.html">
            
                    
                    Concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="one-action-one-file.html">
            
                <a href="one-action-one-file.html">
            
                    
                    One action one file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="namings.html">
            
                <a href="namings.html">
            
                    
                    Namings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="examples.html">
            
                <a href="examples.html">
            
                    
                    Examples
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="core.html">
            
                <a href="core.html">
            
                    
                    Rekit core
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="portal.html">
            
                <a href="portal.html">
            
                    
                    Rekit portal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="cli.html">
            
                <a href="cli.html">
            
                    
                    Command line tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="plugin.html">
            
                <a href="plugin.html">
            
                    
                    Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="routing.html">
            
                <a href="routing.html">
            
                    
                    Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="styling.html">
            
                <a href="styling.html">
            
                    
                    Styling
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="webpack.html">
            
                <a href="webpack.html">
            
                    
                    Bundling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="eslint.html">
            
                <a href="eslint.html">
            
                    
                    Code Quality Check
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Testing</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="testing">Testing</h2>
<p>Testing a React + Redux application is difficult, you need to know many libs/tools regarding React testing and learn their usage. But Rekit will setup everything for you. You just need to write test code in the auto generated test files, running test with the Sublime plugin and reading the coverage report in a browser.</p>
<p>However here is the process of how React testing works. You can know how Rekit setups the testing process.</p>
<ol>
<li><a href="https://github.com/gotwarlost/istanbul" target="_blank">Istanbul</a> instruments the source code for test coverage report. Istanbul itself doesn&apos;t support JSX, but there&apos;s a babel plugin <a href="https://github.com/istanbuljs/babel-plugin-istanbul" target="_blank">babel-plugin-istanbul</a> then it works.</li>
<li>Webpack builds all testing files with <a href="https://github.com/zinserjan/mocha-webpack" target="_blank">mocha-webpack</a> which auto finds test files to test.</li>
<li><a href="https://github.com/mochajs/mocha" target="_blank">Mocha</a> runs the built version of testing files.</li>
<li><a href="https://github.com/istanbuljs/nyc" target="_blank">nyc</a> generates the test coverage report.</li>
</ol>
<p>All app testing files are saved in the folder <code>test/app</code>. And the folder structure is the same with the source code folder structure in <code>src</code> folder.</p>
<h4 id="how-rekit-generates-testing-files">How Rekit generates testing files</h4>
<p>When creating a new page, component or action, Rekit auto creates test cases for them. Even you don&apos;t add any code to to the generated test cases, they help you avoid simple errors. Such as:</p>
<ol>
<li>It ensures a component is always rendered successfully by checking the existance of the root DOM node with correct css class.</li>
<li>It ensures reducer is immutable by checking equality of the previous and new states.</li>
</ol>
<p>For example, when creating a new page, it generates below test case:</p>
<pre class="language-"><code class="lang-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&apos;renders node with correct class name&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pageProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    home<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    actions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> renderedComponent <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>TestPage1 <span class="token punctuation">{</span><span class="token operator">...</span>pageProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>
    renderedComponent<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;.home-test-page-1&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>node
  <span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>exist<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>When creating an action, it generates below reducer test case:</p>
<pre class="language-"><code class="lang-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&apos;reducer should handle MY_ACTION&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> prevState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>
    prevState<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> type<span class="token punctuation">:</span> MY_ACTION <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>prevState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// should be immutable</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>prevState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// TODO: replace this line with real case.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="command-line-tools-testing">Command line tools testing</h4>
<p>All command line tools also have unit test cases saved in <code>test/cli</code> folder. Not only in the rekit project, but also they are copied to the created app so that you can customize the tools with test cases.</p>
<p>Because these tool scripts are written with pure NodeJs, the testing is simpler:</p>
<ol>
<li>Istanbul instruments the source code.</li>
<li>Mocha runs the test cases.</li>
<li>nyc generates the test coverage report.</li>
</ol>
<h4 id="runtestjs">run_test.js</h4>
<p>As you may have noticed, test cases also need to be built with webpack, then Mocha could run the test cases. So running a single test case file also needs the build. So <code>run_test.js</code> is created to simplify this process. You can run any test case file just by the <code>run_test.js</code> tool. It&apos;s also exported as <code>npm test</code>. All arguments to it is just passed to the <code>run_test.js</code> script. The usage is as below:</p>
<pre class="language-"><code>npm test  // run all tests under the `test/app` folder
npm test app/features/home // run tests under the `home` feature
npm test app/**/list.test.js // run all tests named list.test.js under app folder
npm test cli // run tests for all command line tools
npm test all // run tests for both app and cli
</code></pre><h4 id="see-the-coverage-report">See the coverage report</h4>
<p>If tests are are run by <code>app</code>, <code>cli</code> or <code>all</code> then test coverage report will be involved. Different coverage report could be see at:</p>
<ol>
<li><code>all</code>: coverage/lcov-report/index.html</li>
<li><code>app</code>: coverage/app/lcov-report/index.html</li>
<li><code>cli</code>: coverage/cli/lcov-report/index.html</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="styling.html" class="navigation navigation-prev " aria-label="Previous page: Styling">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="webpack.html" class="navigation navigation-next " aria-label="Next page: Bundling">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Testing","level":"1.9","depth":1,"next":{"title":"Bundling","level":"1.10","depth":1,"path":"docs/webpack.md","ref":"docs/webpack.md","articles":[]},"previous":{"title":"Styling","level":"1.8","depth":1,"path":"docs/styling.md","ref":"docs/styling.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs"],"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/supnate/rekit/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/supnate/rekit/tree/master"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Rekit","gitbook":"3.x.x"},"file":{"path":"docs/testing.md","mtime":"2017-04-11T07:37:27.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-07-08T16:12:42.027Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

